import { Properties } from "../components";
import { KeyframePathExample } from "../examples/KeyframePathExample";

# KeyframePath

`KeyframePath` is a component that allows you to display a path of keyframes that can be moved around and edited.
A keyframe is an object with a position and a time. The position is relative to the parent element of the keyframe path.
The time is a number that can be used to interpolate between keyframes.
The interpolation is `linear` by default but can be changed to a `bezier curve`.

If the `enableBezier` prop is set to `true`, the user can move the bezier handles of the keyframes
and change the interpolation type to `bezier` by double-clicking on the keyframe.

## Example

<KeyframePathExample />

```tsx
import { KeyframePath, Keyframe } from "@paulhalleux/react-playground";

const App = () => {
  const containerRef = React.useRef<HTMLDivElement>(null);
  const [keyframes, setKeyframes] = React.useState<Keyframe>([
    { position: { x: 0, y: 0 }, time: 0 },
    { position: { x: 100, y: 100 }, time: 1 },
    { position: { x: 200, y: 0 }, time: 2 },
  ]);

  const onKeyframeChange = (keyframe: number, partial: Partial<Keyframe[]>) => {
    const newKeyframes = [...keyframes];
    newKeyframes[keyframe] = { ...newKeyframes[keyframe], ...partial };
    setKeyframes(newKeyframes);
  };

  return (
    <div ref={containerRef}>
      <KeyframePath
        parentRef={containerRef}
        keyframes={keyframes}
        onKeyframeChange={onKeyframeChange}
        enableBezier={true}
        enablePathMove={true}
        pathColor={[255, 255, 255]}
      />
    </div>
  );
};
```

## API

### KeyframePath Props

<Properties properties={[
  { name: "parentRef", type: "React.RefObject<HTMLElement>", description: "Reference of the parent element of the keyframe path.", required: true },
  { name: "keyframes", type: "Keyframe[]", description: "The keyframes to display.", required: true },
  { name: "onKeyframeChange", type: "(index: number, partial: Partial<Keyframe>) => void", description: "Callback when a keyframe change.", required: true },
  { name: "enableBezier", type: "boolean", description: "Whether to enable bezier handles." },
  { name: "enablePathMove", type: "boolean", description: "Whether to enable moving the path." },
  { name: "onKeyframeSelect", type: "(indexes: number[]) => void", description: "Callback when a keyframe is selected." },
  { name: "pathColor", type: "[number, number, number]", description: "The color of the path and keyframes." },
  { name: "selectedKeyframes", type: "number[]", description: "The indexes of the selected keyframes." },
]} />


### Keyframe Type

```ts
type Keyframe = {
  position: { x: number; y: number };
  time: number;
  interpolation?: Interpolation;
};
```

> Note that `interpolation` is optional and defaults to `linear`.

### Interpolation Type

```ts
type LinearInterpolation = {
  type: "linear";
};

type BezierInterpolation = {
  type: "bezier";
  p1: { x: number; y: number };
  p2: { x: number; y: number };
};

type Interpolation = LinearInterpolation | BezierInterpolation;
```